#include <iostream>
#include <vector>
#include <string> 
#include <iomanip>
#include <Windows.h>

using namespace std;
#define bound_size 30   //maxWidth + bounda_size ç”¨äºè°ƒæ•´ç•Œé¢é•¿åº¦

// è®¡ç®—å­—ç¬¦æ˜¾ç¤ºå®½åº¦ï¼ˆä¸­æ–‡å’Œ Emoji å®½åº¦ä¸º2ï¼ŒASCIIå­—ç¬¦å®½åº¦ä¸º1ï¼‰
int getDisplayWidth(const string& str) {
    int width = 0;
    for (size_t i = 0; i < str.size(); i++) {
        if ((str[i] & 0x80) == 0) {   // ASCIIå­—ç¬¦ (1å­—èŠ‚)
            width += 1;
        } else {  // éASCIIå­—ç¬¦ï¼ˆä¸­æ–‡æˆ–Emojiï¼‰
            width += 2;  // ä¸­æ–‡å’ŒEmojiå®½åº¦ä¸º2
            if ((str[i] & 0xE0) == 0xC0) i += 1;   // 2å­—èŠ‚å­—ç¬¦
            else if ((str[i] & 0xF0) == 0xE0) i += 2;  // 3å­—èŠ‚å­—ç¬¦
            else if ((str[i] & 0xF8) == 0xF0) i += 3;  // 4å­—èŠ‚å­—ç¬¦ï¼ˆEmojiï¼‰
        }
    }
    return width;
}

// æ‰“å°èœå•
void printMenu(const vector<string>& options) {
    size_t maxWidth = 0;

    // è®¡ç®—æœ€å¤§æ˜¾ç¤ºå®½åº¦
    for (auto& op : options) {
        int width = getDisplayWidth(op);
        maxWidth = max(maxWidth, (size_t)width);
    }
    string messages = "âœ¨æ¬¢è¿è¿›å…¥äº¤æ˜“ç³»ç»Ÿï¼âœ¨";
    // ä½¿ç”¨ getDisplayWidth è®¡ç®—messageså®½åº¦
    int len = getDisplayWidth(messages);  
    // æ‰“å°é¡¶éƒ¨è¾¹æ¡†
    cout << "+" << string((maxWidth + bound_size), '-') << "+" << endl;
    //è®©messagesä¸€ç›´ä¿æŒå±…ä¸­æ˜¾ç¤º
    cout << "+" << string(((maxWidth + bound_size - len) / 2), ' ') << messages << string(((maxWidth + bound_size - len) / 2), ' ') << "+" << endl;
    // æ‰“å°é¡¶éƒ¨è¾¹æ¡†ï¼Œä¸”èƒ½å¤Ÿè·Ÿéšä¿¡æ¯é•¿åº¦å˜åŒ–
    cout << "+" << string((maxWidth + bound_size), '-') << "+" << endl;

    // éå†é€‰é¡¹å¹¶æ‰“å°
    for (size_t i = 0; i < options.size(); ++i) {
        string icon;
        switch (i) {
            case 0: icon = "ğŸŸ¢"; break;
            case 1: icon = "ğŸ’°"; break;
            case 2: icon = "ğŸ“Š"; break;
            case 3: icon = "ğŸ“„"; break;
            case 4: icon = "ğŸ›’"; break;
            case 5: icon = "ğŸ“‰"; break;
            case 6: icon = "âŒ"; break;
            case 7: icon = "ğŸ”“"; break;
            case 8: icon = "ğŸ”´"; break;
            default: icon = "â¡ï¸"; break;
        }
        int padding = maxWidth + bound_size-10 - getDisplayWidth(options[i]);
        cout << "| [" << i << "] " << icon << "  " << options[i] << string(padding, ' ') << " |" << endl;
    }
    // æ‰“å°åº•éƒ¨è¾¹æ¡†
    cout << "+" << string(maxWidth + bound_size, '-') << "+" << endl;
}

int main() {
    SetConsoleOutputCP(CP_UTF8);  // è®¾ç½®æ§åˆ¶å°è¾“å‡ºç¼–ç ä¸º UTF-8
    vector<string> menuOptions = {
        "ç™»å½•äº¤æ˜“é‡",
        "æŸ¥è¯¢è´¦æˆ·èµ„é‡‘",    
        "æŸ¥è¯¢æŒä»“",
        "æŸ¥è¯¢æ‰€æœ‰è®¢å•",
        "ä¸‹å•äº¤æ˜“",
        "å¹³å•äº¤æ˜“",
        "æ’¤é”€äº¤æ˜“",
        "é€€å‡ºäº¤æ˜“åŠ å¤§é•¿åº¦ï¼Œç•Œé¢é•¿åº¦åŒæ­¥å˜åŒ–",
        "é€€å‡ºç³»ç»Ÿ"   
    };

    printMenu(menuOptions);
    return 0;
}
